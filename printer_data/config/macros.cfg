[gcode_macro PID_EXTRUSOR]
description: "Realiza PID tuning del extrusor con el ventilador de capa encendido al 100%"
gcode:
    # Encender ventilador de capa al 100%
    M106 S255
    # Esperar para asegurarse de que el ventilador estÃ© completamente encendido
    G4 P2000
    # Iniciar PID tuning para el extrusor
    PID_CALIBRATE HEATER=extruder TARGET=220
    # Apagar ventilador al finalizar el PID tuning
    M107
    SAVE_CONFIG

  ########################################################################  

[gcode_macro PID_CAMA]
description: "Calibra y guarda automÃ¡ticamente los valores PID de la cama caliente"
gcode:
    M117 Iniciando PID de la cama...
    PID_CALIBRATE HEATER=heater_bed TARGET=60
    M117 Finalizando calibraciÃ³n PID...
    SAVE_CONFIG


    [gcode_macro IR_A_ESQUINAS]
description: Mueve el cabezal a las cuatro esquinas de la cama
gcode:
    # Mueve el cabezal a la posiciÃ³n inicial
    G28

    # Esquina inferior izquierda
    G1 X0 Y0 F6000
    G4 P500 ; Pausa de 0.5 segundos para observar la posiciÃ³n

    # Esquina inferior derecha
    G1 X200 Y0 F6000
    G4 P500 ; Pausa de 0.5 segundos

    # Esquina superior derecha
    G1 X200 Y200 F6000
    G4 P500 ; Pausa de 0.5 segundos

    # Esquina superior izquierda
    G1 X0 Y200 F6000
    G4 P500 ; Pausa de 0.5 segundos

    # Regresa al centro de la cama (opcional)
    G1 X100 Y100 F6000


  ########################################################################



[gcode_macro CAMBIO_FILAMENTO]
description: Macro para cambiar el filamento
gcode:
    # Pausa la impresiÃ³n
    PAUSE

    # Eleva el cabezal para evitar daÃ±ar la impresiÃ³n
    G91               ; Modo de movimiento relativo
    G1 Z10 F300       ; Sube el cabezal 10 mm para dar espacio
    G90               ; Modo de movimiento absoluto

    # Retira el filamento actual
    M83               ; Modo de extrusiÃ³n relativo
    G1 E-50 F100      ; Retrae el filamento 50 mm a velocidad lenta

    # Muestra un mensaje para cambiar el filamento
    RESPOND TYPE=command MSG="Retira el filamento y coloca el nuevo filamento, luego presiona RESUME para continuar"

    # Espera hasta que el usuario confirme que ha cambiado el filamento
    RESUME

    # Carga el nuevo filamento
    G1 E50 F100       ; Introduce el nuevo filamento 50 mm a velocidad lenta
    G1 E10 F200       ; Extrude un poco mÃ¡s para asegurar que el filamento estÃ© completamente cargado

    # Limpia el exceso de filamento (opcional)
    G1 E-2 F100       ; RetracciÃ³n pequeÃ±a para evitar goteo

    # Reanuda la impresiÃ³n
    RESUME


  ########################################################################




[gcode_macro PAUSAR]
description: Pausa la impresiÃ³n y mueve el cabezal a un lugar seguro
gcode:
    PAUSE                    ; Pausa la impresiÃ³n
    G91                       ; Modo de movimiento relativo
    G1 Z10 F300               ; Sube el cabezal 10 mm para evitar daÃ±os en la impresiÃ³n
    G90                       ; Modo de movimiento absoluto
    G1 X0 Y0 F6000            ; Mueve el cabezal a la posiciÃ³n de espera (ajusta si prefieres otra ubicaciÃ³n)
    RESPOND TYPE=command MSG="ImpresiÃ³n en pausa. Usa REINICIAR para continuar."



  ########################################################################

[gcode_macro REINICIAR]
description: Reanuda la impresiÃ³n desde donde se pausÃ³
gcode:
    G91                       ; Modo de movimiento relativo
    G1 Z-10 F300              ; Baja el cabezal de vuelta a la altura de la impresiÃ³n
    G90                       ; Modo de movimiento absoluto
    RESUME                    ; Reanuda la impresiÃ³n

     ########################################################################

[gcode_macro MODO_TURBO]
description: Â¡Activa el modo turbo!
gcode:
  SET_VELOCITY_LIMIT VELOCITY=500 ACCEL=10000
  M117  Â¡Modo Turbo Activado!

   ########################################################################

[gcode_macro MODO_SILENCIO]
description: Reduce la velocidad y aceleraciÃ³n
gcode:
  SET_VELOCITY_LIMIT VELOCITY=80 ACCEL=500
  M117  Modo Silencio Activado

########################################################################


[gcode_macro PRECALENTAR_PLA]
description: Precalienta la impresora para imprimir con PLA
gcode:
  M117 ðŸ”¥ Precalentando PLA...
  M104 S200       ; Calienta el hotend a 200Â°C
  M140 S60        ; Calienta la cama a 60Â°C
  M190 S60        ; Espera a que la cama alcance 60Â°C
  M109 S200       ; Espera a que el hotend alcance 200Â°C
  M117 âœ… PLA listo para imprimir

  ########################################################################


[gcode_macro PRECALENTAR_PETG]
description: Precalienta la impresora para imprimir con PETG
gcode:
  M117 ðŸ”¥ Precalentando PETG...
  M104 S235       ; Calienta el hotend a 235Â°C
  M140 S75        ; Calienta la cama a 75Â°C
  M190 S75        ; Espera a que la cama alcance 75Â°C
  M109 S235       ; Espera a que el hotend alcance 235Â°C
  M117 âœ… PETG listo para imprimir

  ########################################################################

[gcode_macro PRECALENTAR_ASA]
description: Precalienta la impresora para imprimir con ASA
gcode:
  M117 ðŸ”¥ Precalentando ASA...
  M104 S250       ; Calienta el hotend a 250Â°C
  M140 S100       ; Calienta la cama a 100Â°C
  M190 S100       ; Espera a que la cama alcance 100Â°C
  M109 S250       ; Espera a que el hotend alcance 250Â°C
  M117 âœ… ASA listo para imprimir
  